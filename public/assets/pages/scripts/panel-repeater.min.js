var catCounter = -1;
var FormRepeater=function(){
	return{init:function(){
		$(".mt-repeater").each(function(){
			$(this).repeater({
				show:function(){
					$(this).slideDown(),
					catCounter++;
					console.log("catCounter++: ",catCounter);
					$("#catagorized").find('.scroller-1').next('.slimScroll-container').remove();
					$("#catagorized").find('.scroller-1').slimScroll({
						 alwaysVisible: true,
										color: '#D3D3D3',
						 wrapperClass:'.food-item '
					});
					$("#catagorized").find('.selectCatagory').next('.select2-container').remove();
					$("#catagorized").find('.selectCatagory').select2({
						placeholder: "Select Category",
						dropdownParent: $("#catagorized")
					});

					//Set defualt First Item
						$('.selectCatagory').each(function(i,item){
							$(item).attr('id','cat-select2-'+i);
							if(i == catCounter)
							{
								var value = $(item)[0]['options'][0].value;
								$(item)[0].value = value;
							}
						});
						$(".selectCatagory").trigger("change.select2");

					$('.C-food-items').each(function(i,item){
						$(item).attr('id','C-food-items-'+i);
						var options = {valueNames: ['name']};
						new List('C-food-items-'+i, options);
					});

					$(".date-picker").datepicker({rtl:App.isRTL(),  orientation:"left",autoclose:!0})
				},
				hide:function(e){
					confirm("Are you sure you want to delete this element?")&&
					$(this).slideUp(e),
					catCounter--;
					console.log("catCounter--: ",catCounter);
					setTimeout(function(){
						$('.selectCatagory').each(function(i,item){
							$(item).attr('id','cat-select2-'+i);
						});
						$('.C-food-items').each(function(i,item){
							$(item).attr('id','C-food-items-'+i);
							var options = {valueNames: ['name']};
							new List('C-food-items-'+i, options);
						});
					}, 1000);
				},
				ready:function(e){}
			})
		})
	}}
}();jQuery(document).ready(function(){
 $(".select-repeater-food-panel").select2({
          placeholder: "Select Final Food Item"
        });
});
